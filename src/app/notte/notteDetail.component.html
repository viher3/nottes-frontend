<div class="card">

	<spinner [show]="loading"></spinner>

	<div class="card-body" *ngIf="!loading">
	    
		<h5 class="card-title">
			<span class="notte-name">{{ notte?.name }}</span>
			<a class="btn btn-sm btn-outline-danger pull-right marginLeftActionBtn" (click)="deleteEntity(notte)">
			    <i class="fa fa-edit"></i>&nbsp;&nbsp;{{ 'common.delete_btn' | translate }}
			</a>
			<a class="btn btn-sm btn-outline-primary pull-right marginLeftActionBtn" [routerLink]="['/notte/edit/' + notte.id ]">
			    <i class="fa fa-edit"></i>&nbsp;&nbsp;{{ 'common.edit_btn' | translate }}
			</a>
			<a class="btn btn-sm btn-outline-dark pull-right" [routerLink]="['/dashboard']">
			    <i class="fa fa-list"></i>&nbsp;&nbsp;{{ 'common.go_back_list' | translate }}
			</a>
		</h5>

		<hr />
		
		<div class="notte-content">

			<div class="row justify-content-md-center" *ngIf="notte?.is_encrypted && ! notte?.is_decrypted">

				<form class="decryptionPassword col-md-8 " #f="ngForm">

					<div class="col-md-12 alert alert-info">
						<i class="fa fa-info-circle"></i>&nbsp;
						{{ 'components.docs.detail.encryption_alert_info' | translate }}
					</div>

				  	<div class="form-group">

				    	<input type="password" name="encryptionPassword" ngModel class="form-control text-center" id="encryptionPassword" placeholder="{{ 'components.docs.detail.encryption_password_input_placeholder' | translate }}" required="required" [ngClass]="{ 'is-invalid': f.controls.encryptionPassword?.errors?.required && submitedForm }" />

				    	<div *ngIf="f.controls.encryptionPassword?.errors?.required && submitedForm" class="invalid-feedback">
							{{ 'forms.required_field' | translate }}
						</div>

				  	</div>

				  	<div class="text-center">
					  	<button (click)="descryptDoc(f)" class="btn btn-outline-primary">
						  	<i class="fa fa-shield"></i>&nbsp;
					  		{{ 'common.decrypt_btn' | translate }}
					  	</button>
					</div>

				</form>

			</div>

			<div [hidden]="!contentIsVisible">{{ notte?.content }}</div>

		</div>

		<div [hidden]="!contentIsVisible">
			<small>{{ notte?.tags }}</small>
		</div>

	</div>

	<div class="card-footer text-muted" *ngIf="!loading">
	    <div class="row" [hidden]="!contentIsVisible">
		    <div class="col-md-6">
		    	<i class="fa fa-user"></i>&nbsp;&nbsp;{{ notte?.creator_user.username }}
		    </div>
		    <div class="col-md-6 text-right">
		    	{{ 'components.docs.detail.last_update' | translate }} {{ notte?.updated_at | date:'dd/MM/yyyy HH:mm:ss' }}
		    </div>
	    </div>
	</div>

</div>