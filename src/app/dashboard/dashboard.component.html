<div id="dashboard" class="row">
	<div class="col-xl-11 pr-0 h-100 notte-list-item-main-wrapper">

		<!-- loading spinner -->
		<div *ngIf="loading" class="text-center loading-more-spinner">
			<i class="fa fa-refresh fa-spin"></i>&nbsp;&nbsp;{{ 'common.loading' | translate }} ...
		</div>
		<!-- end loading spinner -->

		<!-- items list -->
		<div *ngIf="action == 'init'">
			<div *ngIf="!loading || loadingMore" class="pt-2 row">
				<div class="col-6">
					<span *ngIf="!loadingMore">{{ 'components.pagination.listing_x_of_y' | translate:paginationTransParams }}</span>
				</div>
				<div class="col-6 text-right">
					<span class="pr-3">{{ 'components.dashboard.latest_docs' | translate }}</span>
				</div>
			</div>

			<!-- item list -->
			<div class="card-columns">

				<div *ngFor="let item of listElements.items" (dblclick)="loadEntityEvent(item);" class="card">
					<div class="card-body">
						<div class="row">
							<div class="col-xl-1">
								<!-- doc -->
								<i class="fa fa-file-text-o" *ngIf="item.type == 'doc'" placement="right" ngbTooltip="{{ 'components.dashboard.types.doc' | translate }}"></i>
								<!-- link -->
								<i class="fa fa-link" *ngIf="item.type == 'link'" placement="right" ngbTooltip="{{ 'components.dashboard.types.link' | translate }}"></i>
								<!-- file -->
								<i class="fa fa-download" *ngIf="item.type == 'file'" placement="right" ngbTooltip="{{ 'components.dashboard.types.file' | translate }}"></i>
								<!-- encrypted -->
								<i ngbTooltip="{{ 'components.dashboard.encrypted' | translate }}" *ngIf="item.is_encrypted" class="fa fa-shield text-encrypted"></i>
							</div>
							<div class="col-xl-10">
								<h5 class="card-title mb-0 pb-0">{{ item.name }}</h5>
								<small class="text-muted">{{ item.updatedAt | date:'dd/MM/yyyy HH:mm:ss' }}</small>
							</div>
						</div>

						<!-- tags -->
						<tags value="{{ item.tags }}"></tags>
						<!-- actions -->
						<div class="text-right pt-1">
							<a href="javascript:void(0)" (click)="loadEntityEvent(item);" class="pointer card-link ml-0"><i class="fa fa-plus-square-o"></i></a>
							<a href="javascript:void(0)" (click)="editEntity(item);" class="pointer card-link ml-2"><i class="fa fa-edit text-primary"></i></a>
							<a href="javascript:void(0)" (click)="removeEntity(item)" class="pointer card-link ml-2"><i class="fa fa-trash text-danger"></i></a>
						</div>
					</div>
				</div>

			</div>

			<!-- load more btn -->
			<div *ngIf="!loading && (paginationTransParams.current < paginationTransParams.total)" class="text-center mt-2 mb-2">
				<button (click)="loadMoreRequest()" class="btn btn-primary">{{ 'components.dashboard.load_more' | translate }}</button>
			</div>

		</div>
		<!-- end items list -->

		<!-- preview notte content -->
		<div *ngIf="action == 'showEntity'" class="content-preview-wrapper">

			<notte-detail [notte]="notte" [contentIsVisible]="contentIsVisible" (contentIsVisibleChange)="setContentIsVisibleChange($event)" (deleteItemEvent)="reloadEntites($event)"></notte-detail>

		</div>

		<!-- create new notte -->
		<div *ngIf="action == 'createNotte'" class="content-preview-wrapper">

			<notteForm title="components.docs.create.title" saveBtn="components.docs.create.save" action="create"></notteForm>

		</div>

		<!-- edit notte -->
		<div *ngIf="action == 'editNotte'" class="content-preview-wrapper">

			<notteForm (loadingEvent)="setLoadingEvent($event)" title="components.docs.edit.title" saveBtn="components.docs.edit.save" action="edit" id="{{ notte.id }}"></notteForm>

		</div>

		<!-- create link -->
		<div *ngIf="action == 'createLink'" class="content-preview-wrapper">
			<linkForm (loadingEvent)="setLoadingEvent($event)" title="components.links.create.title" saveBtn="components.links.create.save" action="create"></linkForm>
		</div>

		<!-- edit link -->
		<div *ngIf="action == 'editLink'" class="content-preview-wrapper">

			<linkForm title="components.links.edit.title" saveBtn="components.links.edit.save" action="edit" id="{{ notte.id }}"></linkForm>

		</div>

		<!-- file upload -->
		<div *ngIf="action == 'fileUpload'" class="content-preview-wrapper">

			<file-upload></file-upload>

		</div>

		<!-- file preview -->
		<div *ngIf="action == 'filePreview'" class="content-preview-wrapper">

			<file-preview id="{{ notte.id }}" documentId="{{ notte?.document?.id }}" creatorUser="{{ notte.creator_user?.nickname }}" filename="{{ notte?.document?.name }}" mimetype="{{ notte?.document?.mimetype }}" filepath="{{ notte?.document?.path }}"></file-preview>

		</div>

	</div>
	<div class="col-xl-1" style="background:white;">&nbsp;</div>
</div>
